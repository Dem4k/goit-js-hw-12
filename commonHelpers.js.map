{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getImages(searchValue, page, perPage) {\n  const API_KEY = '44400014-e8ce3fc6f032fabdec0605d2e';\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: searchValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  });\n  const url = `?${params}`;\n  const { data } = await axios(url);\n  return data;\n}\n","const galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nexport function renderImages(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        likes,\n        comments,\n        downloads,\n        views,\n        tags,\n      }) => `<li class=\"gallery-item\">\n      <a class=\"item-link\" href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n          <div class=\"thumb\">\n            <p class=\"thumb-item\">Likes <span class=\"thumb-counts\">${likes}</span></p>\n            <p class=\"thumb-item\">Views <span class=\"thumb-counts\">${views}</span></p>\n            <p class=\"thumb-item\">Comments <span class=\"thumb-counts\">${comments}</span></p>\n            <p class=\"thumb-item\">Downloads <span class=\"thumb-counts\">${downloads}</span></p>\n          </div>\n        </li>\n  `\n    )\n    .join('');\n  galleryList.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearGallery() {\n  galleryList.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreBtn() {\n  loadMoreBtn.style.display = 'flex';\n}\n\nexport function hideLoadMoreBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImages } from './js/pixabay-api';\nimport {\n  clearGallery,\n  hideLoader,\n  hideLoadMoreBtn,\n  renderImages,\n  showLoader,\n  showLoadMoreBtn,\n} from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n\nlet searchValue = '';\nlet page = 1;\nconst perPage = 15;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction onSearchFormSubmit(event) {\n  event.preventDefault();\n  searchValue = searchForm.elements.searchValue.value.trim();\n  clearGallery();\n  page = 1;\n  hideLoadMoreBtn();\n  if (searchValue === '') {\n    iziToast.warning({\n      position: 'topRight',\n      title: 'Caution',\n      message: 'Please enter a search query',\n    });\n    return;\n  }\n  showLoader();\n\n  setTimeout(async () => {\n    try {\n      const { hits, totalHits } = await getImages(searchValue, page, perPage);\n\n      if (hits.length === 0) {\n        iziToast.error({\n          position: 'topRight',\n          title: 'Caution',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n      }\n      renderImages(hits);\n      lightbox.refresh();\n      showLoadMoreBtn();\n      if (Math.ceil(totalHits / perPage) === page) {\n        hideLoadMoreBtn();\n        iziToast.info({\n          position: 'topRight',\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    } catch (error) {\n      iziToast.error({\n        position: 'topRight',\n        title: 'Caution',\n        message: 'Sorry something wrong! Try again later',\n      });\n      console.log(error);\n    } finally {\n      hideLoader();\n    }\n  }, 1000);\n}\n\nfunction onLoadMoreBtnClick(event) {\n  page += 1;\n  showLoader();\n  hideLoadMoreBtn();\n  setTimeout(async () => {\n    try {\n      const { hits, totalHits } = await getImages(searchValue, page, perPage);\n\n      renderImages(hits);\n      showLoadMoreBtn();\n      lightbox.refresh();\n      const cardHeight = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect().height;\n\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n\n      if (Math.ceil(totalHits / perPage) === page) {\n        hideLoadMoreBtn();\n        iziToast.info({\n          position: 'topRight',\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    } catch (error) {\n      iziToast.error({\n        position: 'topRight',\n        title: 'Error',\n        message: 'Sorry something wrong! Try again later',\n      });\n      console.log(error);\n    } finally {\n      hideLoader();\n    }\n  }, 1000);\n}\n"],"names":["axios","getImages","searchValue","page","perPage","API_KEY","url","data","galleryList","loader","loadMoreBtn","renderImages","images","markup","webformatURL","largeImageURL","likes","comments","downloads","views","tags","clearGallery","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","searchForm","onSearchFormSubmit","onLoadMoreBtnClick","lightbox","SimpleLightbox","event","iziToast","hits","totalHits","error","cardHeight"],"mappings":"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"}